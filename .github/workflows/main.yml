      - name: SSH debug
        env:
          PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
          SSH_USER: bcumbie
          SSH_HOST: 35.208.101.221
        shell: bash
        run: |
          set -euo pipefail
          if [ -z "${PRIVATE_KEY:-}" ]; then
            echo "::error::SSH_PRIVATE_KEY is empty (secrets unavailable)."
            exit 1
          fi

          printf '%s' "$PRIVATE_KEY" | tr -d '\r' > private_key.pem
          chmod 600 private_key.pem

          echo "Computed public key (safe to print):"
          ssh-keygen -y -f private_key.pem

          echo "Trying SSH with -vvvâ€¦"
          ssh -vvv -o IdentitiesOnly=yes -o StrictHostKeyChecking=accept-new -i private_key.pem "$SSH_USER@$SSH_HOST" 'echo OK && exit' || true
